"use strict";(self.webpackChunkclass_doc=self.webpackChunkclass_doc||[]).push([[217],{9175:(n,e,s)=>{s.r(e),s.d(e,{assets:()=>a,contentTitle:()=>d,default:()=>o,frontMatter:()=>c,metadata:()=>r,toc:()=>l});const r=JSON.parse('{"id":"supabase","title":"Supabase with Flutter","description":"Supabase cho Flutter: H\u01b0\u1edbng d\u1eabn c\u01a1 b\u1ea3n","source":"@site/docs/supabase.md","sourceDirName":".","slug":"/supabase","permalink":"/class-doc/supabase","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Networking ph\u1ea7n 2","permalink":"/class-doc/networking-part2"}}');var t=s(4848),i=s(8453);const c={},d="Supabase with Flutter",a={},l=[{value:"Supabase cho Flutter: H\u01b0\u1edbng d\u1eabn c\u01a1 b\u1ea3n",id:"supabase-cho-flutter-h\u01b0\u1edbng-d\u1eabn-c\u01a1-b\u1ea3n",level:2},{value:"1. Supabase l\xe0 g\xec?",id:"1-supabase-l\xe0-g\xec",level:3},{value:"2. Flutter Supabase SDK",id:"2-flutter-supabase-sdk",level:3},{value:"<strong>3. Thi\u1ebft l\u1eadp Supabase project</strong>",id:"3-thi\u1ebft-l\u1eadp-supabase-project",level:3},{value:"<strong>4. Thi\u1ebft l\u1eadp D\u1ef1 \xe1n Flutter</strong>",id:"4-thi\u1ebft-l\u1eadp-d\u1ef1-\xe1n-flutter",level:3},{value:"5. Leader board screen",id:"5-leader-board-screen",level:3},{value:"6 Update login screen with supabase",id:"6-update-login-screen-with-supabase",level:3}];function h(n){const e={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...n.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(e.header,{children:(0,t.jsx)(e.h1,{id:"supabase-with-flutter",children:"Supabase with Flutter"})}),"\n",(0,t.jsx)(e.h2,{id:"supabase-cho-flutter-h\u01b0\u1edbng-d\u1eabn-c\u01a1-b\u1ea3n",children:"Supabase cho Flutter: H\u01b0\u1edbng d\u1eabn c\u01a1 b\u1ea3n"}),"\n",(0,t.jsxs)(e.p,{children:["H\u01b0\u1edbng d\u1eabn n\xe0y tr\xecnh b\xe0y c\xe1ch t\xedch h\u1ee3p Supabase l\xe0m ",(0,t.jsx)(e.strong,{children:"backend"})," cho \u1ee9ng d\u1ee5ng Flutter"]}),"\n",(0,t.jsx)(e.h3,{id:""}),"\n",(0,t.jsx)(e.h3,{id:"1-supabase-l\xe0-g\xec",children:"1. Supabase l\xe0 g\xec?"}),"\n",(0,t.jsxs)(e.p,{children:["Supabase l\xe0 m\u1ed9t ",(0,t.jsx)(e.strong,{children:"backend-as-a-service (BaaS)"})," ",(0,t.jsx)(e.strong,{children:"open-source"}),". N\xf3 cung c\u1ea5p c\xe1c t\xednh n\u0103ng ",(0,t.jsx)(e.strong,{children:"backend"})," c\u1ed1t l\xf5i m\xe0 kh\xf4ng c\u1ea7n qu\u1ea3n l\xfd m\xe1y ch\u1ee7."]}),"\n",(0,t.jsx)(e.p,{children:"C\xe1c th\xe0nh ph\u1ea7n ch\xednh c\u1ee7a Supabase:"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"PostgreSQL Database:"})," ",(0,t.jsx)(e.strong,{children:"Database"})," quan h\u1ec7."]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Authentication:"})," Qu\u1ea3n l\xfd ng\u01b0\u1eddi d\xf9ng."]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Realtime:"})," \u0110\u1ed3ng b\u1ed9 d\u1eef li\u1ec7u th\u1eddi gian th\u1ef1c."]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Storage:"})," L\u01b0u tr\u1eef t\u1ec7p."]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Edge Functions:"})," Ch\u1ea1y code ",(0,t.jsx)(e.strong,{children:"backend"}),"."]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"APIs:"})," T\u1ef1 \u0111\u1ed9ng t\u1ea1o ",(0,t.jsx)(e.strong,{children:"API"})," cho ",(0,t.jsx)(e.strong,{children:"database"}),"."]}),"\n"]}),"\n",(0,t.jsx)(e.h3,{id:"2-flutter-supabase-sdk",children:"2. Flutter Supabase SDK"}),"\n",(0,t.jsxs)(e.p,{children:["\u0110\u1ec3 k\u1ebft n\u1ed1i \u1ee9ng d\u1ee5ng ",(0,t.jsx)(e.code,{children:"Flutter"})," v\u1edbi d\u1ef1 \xe1n ",(0,t.jsx)(e.code,{children:"Supabase"}),", b\u1ea1n s\u1ebd s\u1eed d\u1ee5ng g\xf3i ",(0,t.jsx)(e.code,{children:"package"})," ch\xednh th\u1ee9c ",(0,t.jsx)(e.a,{href:"https://pub.dev/packages/supabase_flutter",children:"supabase_flutter"}),". ",(0,t.jsx)(e.code,{children:"SDK"})," n\xe0y ho\u1ea1t \u0111\u1ed9ng nh\u01b0 c\u1ea7u n\u1ed1i, cung c\u1ea5p c\xe1c h\xe0m ",(0,t.jsx)(e.code,{children:"Dart"})," ti\u1ec7n l\u1ee3i \u0111\u1ec3 t\u01b0\u01a1ng t\xe1c v\u1edbi ",(0,t.jsx)(e.code,{children:"backend"})," ",(0,t.jsx)(e.code,{children:"Supabase"})," c\u1ee7a b\u1ea1n."]}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.strong,{children:"C\xe1c T\xednh n\u0103ng & H\xe0m ch\xednh:"})}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:[(0,t.jsxs)(e.strong,{children:["Kh\u1edfi t\u1ea1o (",(0,t.jsx)(e.code,{children:"Supabase.initialize"}),")"]}),": \u0110\xe2y l\xe0 b\u01b0\u1edbc \u0111\u1ea7u ti\xean. B\u1ea1n cung c\u1ea5p ",(0,t.jsx)(e.code,{children:"URL"})," d\u1ef1 \xe1n ",(0,t.jsx)(e.code,{children:"Supabase"})," duy nh\u1ea5t v\xe0 kh\xf3a ",(0,t.jsx)(e.code,{children:"anon"})," (",(0,t.jsx)(e.code,{children:"anon key"}),") \u0111\u1ec3 thi\u1ebft l\u1eadp k\u1ebft n\u1ed1i khi \u1ee9ng d\u1ee5ng ",(0,t.jsx)(e.code,{children:"Flutter"})," c\u1ee7a b\u1ea1n kh\u1edfi \u0111\u1ed9ng."]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsxs)(e.strong,{children:["Truy c\u1eadp Client (",(0,t.jsx)(e.code,{children:"Supabase.instance.client"}),")"]}),": Sau khi kh\u1edfi t\u1ea1o, \u0111\u1ed1i t\u01b0\u1ee3ng ",(0,t.jsx)(e.code,{children:"client"})," c\xf3 th\u1ec3 truy c\u1eadp to\xe0n c\u1ee5c n\xe0y l\xe0 \u0111i\u1ec3m v\xe0o ch\xednh c\u1ee7a b\u1ea1n cho t\u1ea5t c\u1ea3 c\xe1c t\u01b0\u01a1ng t\xe1c v\u1edbi ",(0,t.jsx)(e.code,{children:"Supabase"}),"."]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Thao t\xe1c C\u01a1 s\u1edf d\u1eef li\u1ec7u"}),":","\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.code,{children:"client.from('your_table_name')"}),": Nh\u1eafm m\u1ee5c ti\xeau \u0111\u1ebfn m\u1ed9t b\u1ea3ng c\u1ee5 th\u1ec3 trong ",(0,t.jsx)(e.code,{children:"database"})," c\u1ee7a b\u1ea1n."]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.code,{children:".select('column1, column2')"}),": Ch\u1ec9 \u0111\u1ecbnh c\u1ed9t n\xe0o b\u1ea1n mu\u1ed1n truy xu\u1ea5t. S\u1eed d\u1ee5ng ",(0,t.jsx)(e.code,{children:"select()"})," kh\xf4ng c\xf3 \u0111\u1ed1i s\u1ed1 \u0111\u1ec3 l\u1ea5y t\u1ea5t c\u1ea3 c\xe1c c\u1ed9t."]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.code,{children:".insert({...})"}),": Th\xeam c\xe1c h\xe0ng m\u1edbi v\xe0o b\u1ea3ng c\u1ee7a b\u1ea1n."]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.code,{children:".update({...}).eq('id', value)"}),": S\u1eeda \u0111\u1ed5i c\xe1c h\xe0ng hi\u1ec7n c\xf3 d\u1ef1a tr\xean m\u1ed9t \u0111i\u1ec1u ki\u1ec7n (v\xed d\u1ee5: kh\u1edbp v\u1edbi m\u1ed9t ",(0,t.jsx)(e.code,{children:"id"}),")."]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.code,{children:".delete().eq('id', value)"}),": X\xf3a c\xe1c h\xe0ng d\u1ef1a tr\xean m\u1ed9t \u0111i\u1ec1u ki\u1ec7n."]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.code,{children:".order('column_name', ascending: true/false)"}),": S\u1eafp x\u1ebfp k\u1ebft qu\u1ea3 d\u1ef1a tr\xean m\u1ed9t c\u1ed9t."]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.code,{children:".limit(count)"}),": Gi\u1edbi h\u1ea1n s\u1ed1 l\u01b0\u1ee3ng h\xe0ng \u0111\u01b0\u1ee3c tr\u1ea3 v\u1ec1."]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsxs)(e.strong,{children:["X\xe1c th\u1ef1c (",(0,t.jsx)(e.code,{children:"client.auth"}),")"]}),": Cung c\u1ea5p c\xe1c ph\u01b0\u01a1ng th\u1ee9c \u0111\u1ec3 \u0111\u0103ng k\xfd ng\u01b0\u1eddi d\xf9ng, \u0111\u0103ng nh\u1eadp (",(0,t.jsx)(e.code,{children:"signInWithPassword"}),", ",(0,t.jsx)(e.code,{children:"signInWithOtp"}),", nh\xe0 cung c\u1ea5p ",(0,t.jsx)(e.code,{children:"OAuth"}),"), \u0111\u0103ng xu\u1ea5t v\xe0 qu\u1ea3n l\xfd phi\xean ng\u01b0\u1eddi d\xf9ng (m\u1eb7c d\xf9 ch\xfang ta s\u1ebd kh\xf4ng s\u1eed d\u1ee5ng t\xednh n\u0103ng n\xe0y trong h\u01b0\u1edbng d\u1eabn ",(0,t.jsx)(e.em,{children:"n\xe0y"}),")."]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsxs)(e.strong,{children:["Th\u1eddi gian th\u1ef1c (",(0,t.jsx)(e.code,{children:"client.from('your_table').stream(...)"}),")"]}),": Cho ph\xe9p b\u1ea1n \u0111\u0103ng k\xfd c\xe1c thay \u0111\u1ed5i (",(0,t.jsx)(e.code,{children:"insert"}),", ",(0,t.jsx)(e.code,{children:"update"}),", ",(0,t.jsx)(e.code,{children:"delete"}),") trong c\xe1c b\u1ea3ng ",(0,t.jsx)(e.code,{children:"database"})," c\u1ee7a m\xecnh v\xe0 ph\u1ea3n \u1ee9ng t\u1ee9c th\xec trong \u1ee9ng d\u1ee5ng."]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsxs)(e.strong,{children:["L\u01b0u tr\u1eef (",(0,t.jsx)(e.code,{children:"client.storage"}),")"]}),": C\xe1c h\xe0m \u0111\u1ec3 t\u1ea3i l\xean, t\u1ea3i xu\u1ed1ng v\xe0 qu\u1ea3n l\xfd t\u1ec7p."]}),"\n"]}),"\n",(0,t.jsxs)(e.p,{children:["\u0110\u1ed1i v\u1edbi v\xed d\u1ee5 v\u1ec1 b\u1ea3ng x\u1ebfp h\u1ea1ng (",(0,t.jsx)(e.code,{children:"leaderboard"}),") c\u1ee7a ch\xfang ta, ch\xfang ta s\u1ebd ch\u1ee7 y\u1ebfu s\u1eed d\u1ee5ng ",(0,t.jsx)(e.code,{children:"initialize"}),", ",(0,t.jsx)(e.code,{children:"client"}),", ",(0,t.jsx)(e.code,{children:"from"}),", ",(0,t.jsx)(e.code,{children:"select"}),", v\xe0 ",(0,t.jsx)(e.code,{children:"order"}),"."]}),"\n",(0,t.jsx)(e.h3,{id:"3-thi\u1ebft-l\u1eadp-supabase-project",children:(0,t.jsx)(e.strong,{children:"3. Thi\u1ebft l\u1eadp Supabase project"})}),"\n",(0,t.jsxs)(e.ol,{children:["\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"T\u1ea1o D\u1ef1 \xe1n:"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:["Truy c\u1eadp ",(0,t.jsx)(e.a,{href:"https://app.supabase.io/",children:"app.supabase.io"}),' v\xe0 nh\u1ea5p v\xe0o "New project".']}),"\n",(0,t.jsxs)(e.li,{children:["\u0110i\u1ec1n th\xf4ng tin chi ti\u1ebft (t\xean, m\u1eadt kh\u1ea9u ",(0,t.jsx)(e.code,{children:"database"}),", khu v\u1ef1c, g\xf3i mi\u1ec5n ph\xed)."]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"L\u1ea5y API key:"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:["\u0110i\u1ec1u h\u01b0\u1edbng \u0111\u1ebfn ",(0,t.jsx)(e.strong,{children:"Project Settings"})," (bi\u1ec3u t\u01b0\u1ee3ng b\xe1nh r\u0103ng) > ",(0,t.jsx)(e.strong,{children:"API"}),"."]}),"\n",(0,t.jsxs)(e.li,{children:["Sao ch\xe9p ",(0,t.jsx)(e.strong,{children:"Project URL"})," v\xe0 kh\xf3a c\xf4ng khai ",(0,t.jsx)(e.code,{children:"anon"})," (",(0,t.jsx)(e.code,{children:"anon public key"}),"). Gi\u1eef ch\xfang c\u1ea9n th\u1eadn."]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsxs)(e.strong,{children:["T\u1ea1o B\u1ea3ng ",(0,t.jsx)(e.code,{children:"leaderboard"}),":"]}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:["\u0110i t\u1edbi ",(0,t.jsx)(e.strong,{children:"Table Editor"})," (bi\u1ec3u t\u01b0\u1ee3ng b\u1ea3ng)."]}),"\n",(0,t.jsxs)(e.li,{children:["Nh\u1ea5p v\xe0o ",(0,t.jsx)(e.strong,{children:'"New table"'}),"."]}),"\n",(0,t.jsxs)(e.li,{children:["T\xean: ",(0,t.jsx)(e.code,{children:"leaderboard"}),"."]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"\u26a0\ufe0f T\u1eaft RLS (Ch\u1ec9 d\xe0nh cho Demo):"})," B\u1ecf ch\u1ecdn ",(0,t.jsx)(e.strong,{children:'"Enable Row Level Security (RLS)"'}),". \u0110i\u1ec1u n\xe0y \u0111\u01a1n gi\u1ea3n h\xf3a vi\u1ec7c truy c\u1eadp d\u1eef li\u1ec7u cho v\xed d\u1ee5 d\xe0nh cho ng\u01b0\u1eddi m\u1edbi b\u1eaft \u0111\u1ea7u n\xe0y. ",(0,t.jsx)(e.strong,{children:"H\xe3y nh\u1edb b\u1eadt v\xe0 c\u1ea5u h\xecnh RLS cho c\xe1c \u1ee9ng d\u1ee5ng th\u1ef1c t\u1ebf \u0111\u1ec3 b\u1ea3o m\u1eadt d\u1eef li\u1ec7u c\u1ee7a b\u1ea1n."})]}),"\n",(0,t.jsxs)(e.li,{children:["C\xe1c c\u1ed9t: Gi\u1eef l\u1ea1i ",(0,t.jsx)(e.code,{children:"id"})," v\xe0 ",(0,t.jsx)(e.code,{children:"created_at"})," m\u1eb7c \u0111\u1ecbnh. Th\xeam c\u1ed9t ",(0,t.jsx)(e.code,{children:"name"})," (ki\u1ec3u ",(0,t.jsx)(e.code,{children:"text"}),") v\xe0 ",(0,t.jsx)(e.code,{children:"score"})," (ki\u1ec3u ",(0,t.jsx)(e.code,{children:"int4"})," ho\u1eb7c ",(0,t.jsx)(e.code,{children:"int8"}),")."]}),"\n",(0,t.jsxs)(e.li,{children:["Nh\u1ea5p v\xe0o ",(0,t.jsx)(e.strong,{children:'"Save"'}),"."]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Th\xeam D\u1eef li\u1ec7u M\u1eabu:"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:["Ch\u1ecdn b\u1ea3ng ",(0,t.jsx)(e.code,{children:"leaderboard"})," c\u1ee7a b\u1ea1n."]}),"\n",(0,t.jsxs)(e.li,{children:["Nh\u1ea5p v\xe0o ",(0,t.jsx)(e.strong,{children:'"Insert"'})," > ",(0,t.jsx)(e.strong,{children:'"Insert row"'}),'. Th\xeam m\u1ed9t v\xe0i h\xe0ng v\u1edbi t\xean v\xe0 \u0111i\u1ec3m s\u1ed1 m\u1eabu (v\xed d\u1ee5: "Hero" - 300, "Wizard" - 255, "Rogue" - 280).']}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(e.h3,{id:"4-thi\u1ebft-l\u1eadp-d\u1ef1-\xe1n-flutter",children:(0,t.jsx)(e.strong,{children:"4. Thi\u1ebft l\u1eadp D\u1ef1 \xe1n Flutter"})}),"\n",(0,t.jsxs)(e.ol,{children:["\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"T\u1ea1o \u1ee8ng d\u1ee5ng:"})," ",(0,t.jsx)(e.code,{children:"flutter create flutter_supabase_leaderboard"})," & ",(0,t.jsx)(e.code,{children:"cd flutter_supabase_leaderboard"})]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Th\xeam Dependency:"})," Th\xeam ",(0,t.jsx)(e.code,{children:"supabase_flutter: ^2.0.0"})," (ki\u1ec3m tra phi\xean b\u1ea3n hi\u1ec7n t\u1ea1i tr\xean pub.dev) v\xe0o t\u1ec7p ",(0,t.jsx)(e.code,{children:"pubspec.yaml"})," c\u1ee7a b\u1ea1n trong ph\u1ea7n ",(0,t.jsx)(e.code,{children:"dependencies"}),"."]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"C\xe0i \u0111\u1eb7t:"})," Ch\u1ea1y ",(0,t.jsx)(e.code,{children:"flutter pub get"})," trong ",(0,t.jsx)(e.code,{children:"terminal"})," c\u1ee7a b\u1ea1n."]}),"\n"]}),"\n",(0,t.jsx)(e.h3,{id:"5-leader-board-screen",children:"5. Leader board screen"}),"\n",(0,t.jsx)(e.p,{children:"5.1 Initialize supabase client"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-dart",children:"import 'package:flutter/material.dart';\nimport 'package:supabase_flutter/supabase_flutter.dart';\n\nFuture<void> main() async {\n  WidgetsFlutterBinding.ensureInitialized();\n\n  await Supabase.initialize(\n    url: 'YOUR_SUPABASE_URL', // Thay b\u1eb1ng URL Supabase c\u1ee7a b\u1ea1n\n    anonKey: 'YOUR_SUPABASE_ANON_KEY', // Thay b\u1eb1ng kh\xf3a anon Supabase c\u1ee7a b\u1ea1n\n  );\n  runApp(const MyApp());\n}\n\nclass MyApp extends StatelessWidget {\n  const MyApp({super.key});\n\n  @override\n  Widget build(BuildContext context) {\n    return MaterialApp(\n      title: 'Supabase Leaderboard',\n      theme: ThemeData(\n        primarySwatch: Colors.blue,\n      ),\n      home: const LeaderboardPage(),\n    );\n  }\n}\n"})}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.strong,{children:"5.2: L\u1ea5y v\xe0 Hi\u1ec3n th\u1ecb D\u1eef li\u1ec7u"})}),"\n",(0,t.jsxs)(e.p,{children:["T\u1ea1o ",(0,t.jsx)(e.strong,{children:"StatefulWidget"})," ",(0,t.jsx)(e.code,{children:"LeaderboardPage"})," \u0111\u1ec3 l\u1ea5y v\xe0 hi\u1ec3n th\u1ecb d\u1eef li\u1ec7u d\xf9ng ",(0,t.jsx)(e.strong,{children:"FutureBuilder"}),"."]}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-dart",children:"import 'package:flutter/material.dart';\nimport 'package:supabase_flutter/supabase_flutter.dart';\n\nclass LeaderboardPage extends StatefulWidget {\n  const LeaderboardPage({super.key});\n\n  @override\n  State<LeaderboardPage> createState() => _LeaderboardPageState();\n}\n\nclass _LeaderboardPageState extends State<LeaderboardPage> {\n  late Future<List<Map<String, dynamic>>> _leaderboardData;\n\n  @override\n  void initState() {\n    super.initState();\n    _leaderboardData = _fetchLeaderboard();\n  }\n\n  Future<List<Map<String, dynamic>>> _fetchLeaderboard() async {\n    final response = await Supabase.instance.client\n        .from('leaderboard')\n        .select('name, score')\n        .order('score', ascending: false) // S\u1eafp x\u1ebfp theo \u0111i\u1ec3m gi\u1ea3m d\u1ea7n\n        .execute();\n\n    if (response.error != null) {\n      throw response.error!;\n    }\n    return (response.data as List).cast<Map<String, dynamic>>();\n  }\n\n  @override\n  Widget build(BuildContext context) {\n    return Scaffold(\n      appBar: AppBar(\n        title: const Text('Leaderboard'),\n      ),\n      body: FutureBuilder<List<Map<String, dynamic>>>(\n        future: _leaderboardData,\n        builder: (context, snapshot) {\n          if (snapshot.connectionState == ConnectionState.waiting) {\n            return const Center(child: CircularProgressIndicator());\n          } else if (snapshot.hasError) {\n            return Center(child: Text('Error: ${snapshot.error}'));\n          } else if (!snapshot.hasData || snapshot.data!.isEmpty) {\n            return const Center(child: Text('No leaderboard data available.'));\n          } else {\n            final leaderboard = snapshot.data!;\n            return ListView.builder(\n              itemCount: leaderboard.length,\n              itemBuilder: (context, index) {\n                final entry = leaderboard[index];\n                return ListTile(\n                  leading: CircleAvatar(\n                    child: Text('${index + 1}'),\n                  ),\n                  title: Text(entry['name']),\n                  trailing: Text('${entry['score']}'),\n                );\n              },\n            );\n          }\n        },\n      ),\n    );\n  }\n}\n"})}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.strong,{children:"Gi\u1ea3i th\xedch code:"})}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.code,{children:"_leaderboardData"}),": ",(0,t.jsx)(e.strong,{children:"Future"})," ch\u1ee9a d\u1eef li\u1ec7u ",(0,t.jsx)(e.strong,{children:"leaderboard"}),"."]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.code,{children:"initState"}),": G\u1ecdi ",(0,t.jsx)(e.code,{children:"_fetchLeaderboard"})," khi ",(0,t.jsx)(e.strong,{children:"widget"})," kh\u1edfi t\u1ea1o."]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.code,{children:"_fetchLeaderboard"}),": S\u1eed d\u1ee5ng ",(0,t.jsx)(e.code,{children:"Supabase.instance.client"})," \u0111\u1ec3 ",(0,t.jsx)(e.strong,{children:"query"})," b\u1ea3ng ",(0,t.jsx)(e.code,{children:"leaderboard"}),", ch\u1ecdn ",(0,t.jsx)(e.code,{children:"name"})," v\xe0 ",(0,t.jsx)(e.code,{children:"score"}),", s\u1eafp x\u1ebfp theo ",(0,t.jsx)(e.code,{children:"score"})," gi\u1ea3m d\u1ea7n. X\u1eed l\xfd l\u1ed7i v\xe0 tr\u1ea3 v\u1ec1 d\u1eef li\u1ec7u."]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.code,{children:"build"}),": S\u1eed d\u1ee5ng ",(0,t.jsx)(e.strong,{children:"FutureBuilder"})," \u0111\u1ec3 hi\u1ec3n th\u1ecb d\u1eef li\u1ec7u.","\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.code,{children:"ConnectionState.waiting"}),": Hi\u1ec3n th\u1ecb ",(0,t.jsx)(e.strong,{children:"CircularProgressIndicator"}),"."]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.code,{children:"snapshot.hasError"}),": Hi\u1ec3n th\u1ecb l\u1ed7i."]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.code,{children:"!snapshot.hasData || snapshot.data!.isEmpty"}),': Hi\u1ec3n th\u1ecb "No data".']}),"\n",(0,t.jsxs)(e.li,{children:["Ng\u01b0\u1ee3c l\u1ea1i: Hi\u1ec3n th\u1ecb danh s\xe1ch b\u1eb1ng ",(0,t.jsx)(e.strong,{children:"ListView.builder"})," v\xe0 ",(0,t.jsx)(e.strong,{children:"ListTile"}),"."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(e.h3,{id:"6-update-login-screen-with-supabase",children:"6 Update login screen with supabase"}),"\n",(0,t.jsx)(e.p,{children:"Ch\u1ea1y code c\u1ee7a b\xe0i tr\u01b0\u1edbc (HTTP POST - login) s\u1eeda code c\u1ee7a function login \u0111\u1ec3 l\xe0m vi\u1ec7c v\u1edbi supabase"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-dart",children:'import \'package:supabase_flutter/supabase_flutter.dart\';\n\n// H\xe0m x\u1eed l\xfd logic \u0111\u0103ng nh\u1eadp v\xe0 tr\u1ea3 v\u1ec1 k\u1ebft qu\u1ea3 theo c\u1ea5u tr\xfac JSON\nFuture<Map<String, dynamic>> login(String email, String password) async {\n  try {\n    final AuthResponse response = await Supabase.instance.client.auth.signInWithPassword(\n      email: email.trim(),\n      password: password.trim(),\n    );\n\n    // Ki\u1ec3m tra n\u1ebfu ng\u01b0\u1eddi d\xf9ng t\u1ed3n t\u1ea1i trong ph\u1ea3n h\u1ed3i (\u0111\u0103ng nh\u1eadp th\xe0nh c\xf4ng)\n    if (response.user != null) {\n      return {\n        "success": true,\n        "message": "\u0110\u0103ng nh\u1eadp th\xe0nh c\xf4ng!",\n        // Gi\u1ea3 s\u1eed \'username\' \u1edf \u0111\xe2y l\xe0 email c\u1ee7a ng\u01b0\u1eddi d\xf9ng.\n        // T\xf9y thu\u1ed9c v\xe0o database schema c\u1ee7a b\u1ea1n, b\u1ea1n c\xf3 th\u1ec3 c\u1ea7n fetch profile \u0111\u1ec3 l\u1ea5y username th\u1eadt.\n        "username": response.user!.email ?? "Ng\u01b0\u1eddi d\xf9ng",\n      };\n    } else {\n      // Tr\u01b0\u1eddng h\u1ee3p \u0111\u0103ng nh\u1eadp kh\xf4ng th\xe0nh c\xf4ng nh\u01b0ng kh\xf4ng n\xe9m AuthException (hi\u1ebfm g\u1eb7p)\n       return {\n        "success": false,\n        "message": "\u0110\u0103ng nh\u1eadp th\u1ea5t b\u1ea1i: Th\xf4ng tin kh\xf4ng h\u1ee3p l\u1ec7.",\n      };\n    }\n\n  } on AuthException catch (e) {\n    // B\u1eaft c\xe1c l\u1ed7i c\u1ee5 th\u1ec3 t\u1eeb Supabase Authentication\n    return {\n      "success": false,\n      "message": "L\u1ed7i \u0111\u0103ng nh\u1eadp: ${e.message}",\n    };\n  } catch (e) {\n    // B\u1eaft c\xe1c l\u1ed7i chung kh\xe1c\n    return {\n      "success": false,\n      "message": "\u0110\xe3 x\u1ea3y ra l\u1ed7i: ${e.toString()}",\n    };\n  }\n}\n\n'})})]})}function o(n={}){const{wrapper:e}={...(0,i.R)(),...n.components};return e?(0,t.jsx)(e,{...n,children:(0,t.jsx)(h,{...n})}):h(n)}},8453:(n,e,s)=>{s.d(e,{R:()=>c,x:()=>d});var r=s(6540);const t={},i=r.createContext(t);function c(n){const e=r.useContext(i);return r.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function d(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(t):n.components||t:c(n.components),r.createElement(i.Provider,{value:e},n.children)}}}]);